{
	"name": "SoldierController",
	"events": [
		{
			"functionName": "SpawnSoldiers",
			"functionDescription": "Function to spawn all soldiers in a defined order.",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionCopyPicked": false,
			"functionIsAsync": false,
			"functionParameters": [
				{
					"name": "SourceZoneUID",
					"type": "number",
					"initialValue": "0",
					"comment": "UID of Zone from which to spawn soldiers",
					"sid": 813322902019269
				},
				{
					"name": "DestinationZoneUID",
					"type": "number",
					"initialValue": "0",
					"comment": "UID of zone to send soldiers to",
					"sid": 899037124483783
				},
				{
					"name": "colourToSpawn",
					"type": "string",
					"initialValue": "",
					"comment": "Color of soldier to spawn (case sensitive string; red/blue)",
					"sid": 499903808441665
				}
			],
			"eventType": "function-block",
			"conditions": [],
			"actions": [],
			"sid": 570286372935914,
			"children": [
				{
					"eventType": "variable",
					"name": "sourceX",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 122810105832752
				},
				{
					"eventType": "variable",
					"name": "sourceY",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 798039579189425
				},
				{
					"eventType": "variable",
					"name": "destinationX",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 219064375489905
				},
				{
					"eventType": "variable",
					"name": "destinationY",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 382789822522994
				},
				{
					"eventType": "variable",
					"name": "angleBetweenZones",
					"type": "number",
					"initialValue": "0",
					"comment": "Angle between the source and destination zones",
					"isStatic": false,
					"isConstant": false,
					"sid": 167747447508900
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "pick-by-unique-id",
							"objectClass": "Zone",
							"sid": 202437437784145,
							"parameters": {
								"unique-id": "SourceZoneUID"
							}
						},
						{
							"id": "pick-children",
							"objectClass": "Zone",
							"sid": 854380558965514,
							"parameters": {
								"child": "ZoneCenter",
								"which": "own"
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 320094532277853,
							"parameters": {
								"variable": "sourceX",
								"value": "ZoneCenter.X"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 641330030090766,
							"parameters": {
								"variable": "sourceY",
								"value": "ZoneCenter.Y"
							}
						}
					],
					"sid": 394888007548370
				},
				{
					"eventType": "comment",
					"text": "Pick only works from the last pool of picked items. Hence to pick something that was excluded in the last pick, I reset the pick by \"pick all\", and then picked what I wanted to pick"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "pick-all",
							"objectClass": "System",
							"sid": 192563491155358,
							"parameters": {
								"object": "Zone"
							}
						},
						{
							"id": "pick-by-unique-id",
							"objectClass": "Zone",
							"sid": 447297761481569,
							"parameters": {
								"unique-id": "DestinationZoneUID"
							}
						},
						{
							"id": "pick-children",
							"objectClass": "Zone",
							"sid": 545313401878663,
							"parameters": {
								"child": "ZoneCenter",
								"which": "own"
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 922476750684839,
							"parameters": {
								"variable": "destinationX",
								"value": "ZoneCenter.X"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 521896562203018,
							"parameters": {
								"variable": "destinationY",
								"value": "ZoneCenter.Y"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 700060491752297,
							"parameters": {
								"variable": "angleBetweenZones",
								"value": "angle(sourceX, sourceY, destinationX, destinationY)"
							}
						},
						{
							"id": "set-text",
							"objectClass": "DebugText",
							"sid": 651166145442320,
							"parameters": {
								"text": "angleBetweenZones"
							}
						}
					],
					"sid": 328834105555371
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "pick-by-comparison",
							"objectClass": "System",
							"sid": 698342504345180,
							"parameters": {
								"object": "Player",
								"expression": "Player.PlayerColor",
								"comparison": 0,
								"value": "colourToSpawn"
							}
						},
						{
							"id": "every-x-seconds",
							"objectClass": "System",
							"sid": 109525860526464,
							"parameters": {
								"interval-seconds": "Player.SpawnFrequency"
							}
						}
					],
					"actions": [],
					"sid": 509174785033360,
					"children": [
						{
							"eventType": "variable",
							"name": "offset",
							"type": "number",
							"initialValue": "0",
							"comment": "Spawn Offset distance from center for this particular soldier",
							"isStatic": false,
							"isConstant": false,
							"sid": 820779681790047
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for",
									"objectClass": "System",
									"sid": 544587565363518,
									"parameters": {
										"name": "\"Spawn\"",
										"start-index": "0",
										"end-index": "Player.SpawnBatchSize - 1"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 209712956556842,
									"parameters": {
										"variable": "offset",
										"value": "(loopindex - (Player.SpawnBatchSize/2)) * Soldier.Height"
									}
								},
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 728332358958088,
									"parameters": {
										"object-to-create": "Soldier",
										"layer": "0",
										"x": "sourceX - (offset * sin(angleBetweenZones))",
										"y": "sourceY + (offset * cos(angleBetweenZones))",
										"create-hierarchy": false,
										"template-name": "\"Soldier\""
									}
								},
								{
									"id": "set-angle",
									"objectClass": "Soldier",
									"sid": 863618109025954,
									"parameters": {
										"angle": "angleBetweenZones"
									}
								},
								{
									"id": "set-speed",
									"objectClass": "Soldier",
									"sid": 225428499782105,
									"behaviorType": "Bullet",
									"parameters": {
										"speed": "Player.SoldierTravelSpeed"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Soldier",
									"sid": 341941964417762,
									"parameters": {
										"instance-variable": "DestinationZoneUID",
										"value": "DestinationZoneUID"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Soldier",
									"sid": 536976498650368,
									"parameters": {
										"instance-variable": "BelongsTo",
										"value": "Player.PlayerColor"
									}
								}
							],
							"sid": 601778286719355
						}
					]
				}
			]
		}
	],
	"sid": 484126003790637
}